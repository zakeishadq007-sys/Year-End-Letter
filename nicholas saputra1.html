<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>End Year Letter</title>
  <style>
    :root{
      --bg:#f6d6ff; --envelope:#f2aa8e;
      --flap:#261610; --paper:#ffe6fb; --paper-shadow:#660c4563;
      --accent:#ffd7e4; --ink:#550615;
    }
    * { box-sizing: border-box; }
    body{
      margin:0; padding:0; min-height:100vh;
      display:flex; align-items:center; justify-content:center;
      background: radial-gradient(1200px 1200px at 50% 60%, #2e0b38 0%, var(--bg) 100%);
      font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
      overflow-x: hidden;
    }
    .scene{
      width: clamp(300px, 90vw, 560px);
      aspect-ratio: 1/1; 
      position:relative;
      filter: drop-shadow(0 18px 40px rgba(0,0,0,.5));
      cursor:pointer;
      margin: 20px auto;
    }
    .envelope{
      position:absolute; 
      inset: 120px 40px 120px 40px;
      border-radius:10px;
      background: linear-gradient(180deg, var(--envelope) 0%, #e3b9a7 40%, var(--envelope) 100%);
      overflow:visible;
    }
    .envelope::before{
      content:""; 
      position:absolute; 
      inset:auto 0 0 0; 
      height:54%;
      background:
        linear-gradient(135deg, transparent 48%, rgba(0,0,0,0.1) 48.2%) left/50% 100% no-repeat,
        linear-gradient(225deg, transparent 48%, rgba(0,0,0,0.1) 48.2%) right/50% 100% no-repeat;
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      transform-origin:center bottom;
    }
    .flap{
      position:absolute; 
      left:0; right:0; top:0; 
      height:55%;
      background: linear-gradient(180deg, var(--flap) 0%, #b27a67 100%);
      clip-path: polygon(0 0, 100% 0, 50% 100%);
      transform-origin: 50% 0%;
      transition: transform .6s cubic-bezier(.2,.8,.2,1);
      z-index:10;
    }
    .stamp{
      position:absolute; 
      left:50%; top: 38%;
      transform: translateX(-50%);
      width:120px; height:120px; 
      border-radius:50%; 
      background: linear-gradient(135deg, #ff69b4, #ff1493);
      box-shadow: 0 4px 12px rgba(255,20,147,0.4);
      display:flex; 
      align-items:center; 
      justify-content:center;
      z-index:100;
      transition: all 0.6s ease;
    }
    .stamp::before{
      content: "ðŸ’Œ";
      font-size: 50px;
    }

    .paper{
      position:absolute; 
      left:10%; right:10%; 
      top:18%; 
      height:64%;
      background: linear-gradient(180deg, var(--paper) 0%, #fce5ff 50%, var(--paper) 100%);
      border-radius:8px;
      box-shadow: 0 6px 16px rgba(0,0,0,.25), inset 0 -10px 30px var(--paper-shadow);
      z-index:2; 
      padding: clamp(16px, 4vw, 28px); 
      color: var(--ink);
      transform: translateY(50%) scale(.9); 
      opacity:0;
      transition: all 0.6s cubic-bezier(.2,.8,.2,1);
      overflow-y: auto;
      overflow-x: hidden;
    }
    
    .paper h3{ 
      margin:0 0 12px; 
      font-size: clamp(18px, 3.5vw, 22px);
      color: #d91b5c;
    }
    .paper hr{
      border: none;
      border-top: 2px solid #ffd7e4;
      margin: 12px 0;
    }
    .paper p{ 
      font-size: clamp(13px, 2.8vw, 16px); 
      line-height:1.8;
      margin: 12px 0;
      text-align: justify;
    }

    .hint{
      position:absolute; 
      inset:auto 0 4% 0; 
      text-align:center;
      font-size: clamp(12px, 2.8vw, 14px); 
      color:#e6d7ff; 
      opacity:.9;
      user-select:none; 
      pointer-events:none; 
      z-index:7;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }

    .controls{
      position:absolute; 
      top:6%; right:8%;
      display:flex; 
      gap:8px; 
      z-index:8;
    }
    
    .btn{
      background: rgba(255,255,255,.18);
      color:#fff; 
      border:1px solid rgba(255,255,255,.25);
      padding:8px 12px; 
      border-radius:8px; 
      font-size:12px;
      backdrop-filter: blur(4px);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .btn:hover{
      background: rgba(255,255,255,.3);
      transform: translateY(-2px);
    }
    .btn:active{
      transform: translateY(0);
    }

    /* State */
    .scene.open .flap{ 
      transform: rotateX(180deg); 
    }
    .scene.open .paper{ 
      transform: translateY(0) scale(1); 
      opacity:1; 
    }
    .scene.open .stamp{ 
      transform: translateX(-50%) translateY(-120%) scale(0.8); 
      opacity:0; 
    }
    .scene.close .flap{ 
      transform: rotateX(0deg); 
    }
    .scene.close .paper{ 
      transform: translateY(50%) scale(.9); 
      opacity:0; 
    }
    .scene.close .stamp{
      transform: translateX(-50%) translateY(0) scale(1);
      opacity: 1;
    }

    /* Mobile optimization */
    @media (max-width: 600px) {
      .paper {
        padding: 14px;
        top: 16%;
        height: 66%;
      }
      .controls {
        top: 4%;
        right: 4%;
        gap: 6px;
      }
      .btn {
        padding: 6px 10px;
        font-size: 11px;
      }
    }
  </style>
</head>
<body>

  <div class="scene close" id="scene" role="button" tabindex="0" aria-label="Ketuk untuk membuka atau menutup amplop">
    <div class="envelope">
      <div class="flap"></div>

      <div class="stamp"></div>

      <div class="paper">
        <h3>Halooo nicholaassssapuutraaaa!!</h3>
        <hr />
        <p>Well, first.. I hope this so-called letter running well at you. 
        I know this is kinda weird, writing a letter in 2025, but hey, why not?
        I just want to say thank you for being such an amazing friend throughout this year.</p>
        
        <p>Our red string begins when I borrowed you my umbrella to handle panasnya PKKMB.. and I never thought we've been these far.
        You showing what's your true colors, being there when I need someone to talk to, and just being you.
        I really appreciate our friendship, and I hope we can keep this bond strong in the years to come.
        Wishing you all the best for the new year ahead! May it be filled with joy, success, and lots of memorable moments.</p>
        
        <p>Untuk aku yang masih sering bingung apasih yang mau aku lakuin, thank you for realizing me, that it's okay to not have everything figured out yet.
        Makasih udh mau "baca" aku, dengerin curhatanku yang kadang suka random, dan ngasih aku perspektif baru.
        Actually, there are still a lot of your questions that I haven't answered yet, but I promise I'll get to them when I'm ready.
        So, here's to another year of friendship, laughter, and unforgettable memories.
        Semoga kita kedepannya masih bisa bareng dengan segala ups and downsnya.
        Yeah, that's all I can say and let me keep the rest in my du'a.</p>
        
        <p style="text-align:right; margin-top: 24px;">Sincerely,<br />@zakeishadq</p>
      </div>
    </div>

    <div class="hint">Ketuk untuk BUKA â€” ketuk lagi untuk TUTUP</div>

    <div class="controls" aria-label="Kontrol audio">
      <button class="btn" id="btnMute">ðŸ”Š Suara</button>
    </div>
  </div>

  <audio id="music" loop>
    <source src="Olivia Dean - A Couple Minutes.mp3" type="audio/mpeg">
  </audio>

  <script>
    const scene   = document.getElementById('scene');
    const music   = document.getElementById('music');
    const btnMute = document.getElementById('btnMute');

    music.volume = 0.4;
    let isOpen = false;

    function playMusicSafe(){
      music.play().catch(err => {
        console.warn('Audio belum bisa diputar:', err);
      });
    }

    function pauseMusic(){
      music.pause();
    }

    function toggleEnvelope(e){
      e.stopPropagation();
      
      if (isOpen) {
        scene.classList.remove('open');
        scene.classList.add('close');
        pauseMusic();
        isOpen = false;
      } else {
        scene.classList.remove('close');
        scene.classList.add('open');
        playMusicSafe();
        isOpen = true;
      }
    }

    scene.addEventListener('click', toggleEnvelope);

    scene.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { 
        e.preventDefault(); 
        toggleEnvelope(e); 
      }
    });

    btnMute.addEventListener('click', (e) => {
      e.stopPropagation();
      music.muted = !music.muted;
      btnMute.textContent = music.muted ? 'ðŸ”‡ Mute' : 'ðŸ”Š Suara';
    });

    // Preload audio
    music.load();
  </script>

</body>
</html>